
@model Infraestructure.Models.Producto

@{
    ViewBag.Title = "Details";
}

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div>
    <div class="content">
        <div class="row g-3">
            <div class="col">
                <div class=" mb-3" style="max-width: auto;">
                    <div class="row g-0 d-flex align-items-start">
                        <div class="col-md-6 d-flex justify-content-center align-items-center">
                            <img src="data:image/jpeg;charset=utf-8;base64,@Convert.ToBase64String(Model.Imagen)"
                                 alt="Libro @Html.DisplayFor(model => model.Nombre)"
                                 class="img-fluid rounded-start imagen-detalle " />
  
                        </div>




                        <div class="col-md-6">


                            <div class="details">
                                <p class="card-text">
                                    <span class="card-title text-black">@Html.DisplayFor(model => model.Nombre)</span>
                                </p>
                                <p class="card-text">
                                    <i class="fa-solid fa-box detail-descrip">  @Html.DisplayFor(model => model.Descripcion)</i>
                                </p>

                                <p class="card-text">
                                    <i class="fa-solid fa-box"> </i> <b>@Html.DisplayNameFor(model => model.Estado):</b>  @Html.DisplayFor(model => model.Estado)
                                </p>
                                <p class="card-text">
                                    <i class="fa-solid fa-box">SKU: </i> <i class="">@Html.DisplayFor(model => model.Id)</i>
                                </p>

                                @*<p class="card-text">
                <i class="fa-solid fa-circle-user"></i> <b>@Html.DisplayNameFor(model => model.Tienda):</b>    @Html.DisplayFor(model => model.Tienda.NombreProveedor)
            </p>*@
                                <p class="card-text">
                                    <i class="fa-solid fa-bookmark"></i> <b>@Html.DisplayNameFor(model => model.Categoria):</b> @Html.DisplayFor(model => model.Categoria.nombre)
                                </p>
                                <p class="card-text fw-bold precio" style="color: #2596be; font-weight: 500;">
                                    $@Html.DisplayFor(model => model.Precio)
                                </p>
                            </div>
                            <hr class="te_s_hr_line bg-black" />

                            <div class="row">
                                <div class="logo-detail ">
                                    <img src="~/Content/Images/logo.png" />
                                </div>
                                <div class="col-md-10">
                                    <span class="slogan-detail mb-3" style="margin-bottom:5rem">
                                        Producimos y comercializamos la marca
                                        <b class="fw-bold">@Html.DisplayFor(model => model.Tienda.NombreProveedor)</b>
                                        para los productos de mayor producción agropecuaria, productos destinados para fincas y granjas donde se esperan rendimientos de mercado.
                                    </span>
                                    <button style="margin-top:1rem">

                                        @Html.ActionLink("Ver productos", "Index", "Home", null, new { @class = "button-productos" })
                                    </button>
                                </div>
                            </div>

                            <hr class="te_s_hr_line bg-black" />

                            <ul class="d-flex text-decoration-none custom-list">
                                <li><span class="material-symbols-outlined"> <span class="material-symbols-outlined">local_shipping</span> </span>Envíos a todo el país</li>
                                <li><span class="material-symbols-outlined">payments</span>Ver nuestra política de devoluciones</li>
                            </ul>


                        <div class="chat-container">
                            <div class="chat-header">
                                <h2>Chat de Preguntas y Respuestas</h2>
                            </div>
                            <div class="chat-body" id="chat-body">
                                <!-- Aquí se mostrarán las preguntas y respuestas -->
                            </div>
                            <div class="chat-input">
                                <input type="text" id="user-input" placeholder="Escribe tu pregunta...">
                                @foreach (var chat in Model.ChatProducto)
                                {
                                    foreach (var mensaje in chat.Mensaje)
                                    {
                                       
                                        <h1>@Html.DisplayFor(o => mensaje.Usuario.Nombre)</h1>
                                    }
                                }
                                <input type="submit" value="Enviar" onclick="sendMessage()">

                            </div>
                        </div>
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

<script>
    function sendMessage() {
        var userInput = document.getElementById('user-input');
        var chatBody = document.getElementById('chat-body');

        var question = userInput.value;
        var answer = getAnswer(question);

        var questionElement = document.createElement('p');
        questionElement.textContent = question;
        questionElement.classList.add('chat-message');

        var answerElement = document.createElement('p');
        answerElement.textContent = answer;
        answerElement.classList.add('chat-message');

        chatBody.appendChild(questionElement);
        chatBody.appendChild(answerElement);

        userInput.value = '';
    }

    function getAnswer(question) {
        // Aquí puedes implementar la lógica para obtener la respuesta según la pregunta
        // Puedes usar condicionales, llamadas a APIs, etc.

        // Ejemplo básico:
        if (question.toLowerCase().includes('hola')) {
            return '¡Hola! ¿En qué puedo ayudarte?';
        } else {
            return 'Lo siento, no puedo responder esa pregunta.';
        }
    }
</script>
